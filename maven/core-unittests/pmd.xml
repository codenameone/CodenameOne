<?xml version="1.0"?>
<ruleset name="core-unittests"
         xmlns="http://pmd.sourceforge.net/ruleset/2.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://pmd.sourceforge.net/ruleset/2.0.0 http://pmd.sourceforge.net/ruleset_2_0_0.xsd">
    <description>PMD rules for core unit tests.</description>
    <rule ref="rulesets/java/quickstart.xml">
        <!-- This is a dumb micro-optimization that doesn't work well
        in Codename One -->
        <exclude name="OptimizableToArrayCall" />

        <!-- This is dumb, it blocks switch cases with
        multiple options on the same entry -->
        <exclude name="ImplicitSwitchFallThrough" />

        <!-- This is used in the code -->
        <exclude name="AvoidDollarSigns" />

        <!-- We use our own custom logging framework,
        and this check doesn't work well with it -->
        <exclude name="GuardLogStatement" />
        <exclude name="ProperLogger" />

        <!-- We don't support clone -->
        <exclude name="ProperCloneImplementation" />

        <!-- This conflicts with other checks from PMD and SpotBugs -->
        <exclude name="SingletonClassReturningNewInstance" />

        <!-- Since we don't support Java 7, we can't merge catch blocks -->
        <exclude name="IdenticalCatchBranches" />

        <!-- Unfortunately, this check is remarkably buggy -->
        <exclude name="UnusedPrivateMethod" />

        <!-- This is probably not a big deal in most areas where we have it -->
        <exclude name="AssignmentToNonFinalStatic" />

        <!--
        We use these a lot in the code. I don't see the value in removing them
        -->
        <exclude name="UselessParentheses" />

        <!-- We do that a lot in some APIs -->
        <exclude name="AvoidCatchingThrowable" />

        <!-- not valuable -->
        <exclude name="UncommentedEmptyConstructor" />

        <!-- Excluded since this isn't true for Codename One.
        Coding to an interface is measurably slower in an AOT
        environment. We also use many legacy classes at the API
        level and can't just replace them -->
        <exclude name="LooseCoupling" />
        <exclude name="ReturnEmptyCollectionRatherThanNull"/>
        <exclude name="UncommentedEmptyMethodBody"/>
        <exclude name="UseLocaleWithCaseConversions"/>
    </rule>
</ruleset>
